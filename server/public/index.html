<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Job Application Tracker</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="brand">
          <div class="logo">JAT</div>
          <div>
            <div class="title">Job Application Tracker</div>
            <div class="subtitle">Semester project UI</div>
          </div>
        </div>
        <div class="topbar-right">
          <div id="meBadge" class="badge muted">Signed out (guest)</div>
          <button id="logoutBtn" class="btn ghost" style="display: none">Sign out</button>
        </div>
      </header>

      <div class="layout">
        <nav class="sidebar">
          <a class="navlink active" href="#/dashboard" data-route="dashboard">Dashboard</a>
          <a class="navlink" href="#/applications" data-route="applications">Applications</a>
          <a class="navlink" href="#/companies" data-route="companies">Companies</a>
          <a class="navlink" href="#/categories" data-route="categories">Categories</a>
          <a class="navlink" href="#/reminders" data-route="reminders">Reminders</a>
          <div class="divider"></div>
          <a class="navlink" href="#/login" data-route="login">Login</a>
          <a class="navlink" href="#/register" data-route="register">Register</a>
        </nav>

        <main class="content">
          <div id="toast" class="toast" style="display: none"></div>

          <section id="view-dashboard" class="view">
            <div class="row">
              <h2>Dashboard</h2>
              <div class="row-actions">
                <button id="refreshDashboardBtn" class="btn">Refresh</button>
              </div>
            </div>
            <div class="cards">
              <div class="card">
                <div class="card-label">Total Applications</div>
                <div id="dashTotal" class="card-value">-</div>
              </div>
              <div class="card">
                <div class="card-label">Interviews</div>
                <div id="dashInterviews" class="card-value">-</div>
              </div>
              <div class="card">
                <div class="card-label">Offers</div>
                <div id="dashOffers" class="card-value">-</div>
              </div>
              <div class="card">
                <div class="card-label">Rejections</div>
                <div id="dashRejections" class="card-value">-</div>
              </div>
            </div>

            <div class="panel">
              <div class="panel-title">
                <div>Daily Applications (Timeseries)</div>
                <div class="muted small">Analyst/Management/Admin: global, Regular: own</div>
              </div>
              <div class="row small-gap">
                <label class="field">
                  <span>From</span>
                  <input id="tsFrom" type="date" value="2025-01-01" />
                </label>
                <label class="field">
                  <span>To</span>
                  <input id="tsTo" type="date" value="2025-01-31" />
                </label>
                <button id="loadTimeseriesBtn" class="btn">Load</button>
              </div>
              <div id="timeseries" class="timeseries"></div>
            </div>
          </section>

          <section id="view-login" class="view" style="display: none">
            <div class="row">
              <h2>Login</h2>
            </div>
            <div class="panel">
              <div class="muted small">
                Seeded users:
                <code>admin@example.com / Admin123!</code>,
                <code>user@example.com / User123!</code>
              </div>
              <form id="loginForm" class="form">
                <label class="field">
                  <span>Email</span>
                  <input name="email" type="email" placeholder="john@example.com" required />
                </label>
                <label class="field">
                  <span>Password</span>
                  <input name="password" type="password" placeholder="••••••••" required />
                </label>
                <button class="btn primary" type="submit">Sign in</button>
              </form>
            </div>
          </section>

          <section id="view-register" class="view" style="display: none">
            <div class="row">
              <h2>Register</h2>
            </div>
            <div class="panel">
              <form id="registerForm" class="form">
                <label class="field">
                  <span>Name</span>
                  <input name="name" type="text" placeholder="John Doe" required />
                </label>
                <label class="field">
                  <span>Email</span>
                  <input name="email" type="email" placeholder="john@example.com" required />
                </label>
                <label class="field">
                  <span>Password</span>
                  <input name="password" type="password" placeholder="Secret123!" required />
                </label>
                <button class="btn primary" type="submit">Create account</button>
              </form>
            </div>
          </section>

          <section id="view-companies" class="view" style="display: none">
            <div class="row">
              <h2>Companies</h2>
              <div class="row-actions">
                <button id="refreshCompaniesBtn" class="btn">Refresh</button>
              </div>
            </div>
            <div class="panel">
              <form id="companyForm" class="form inline">
                <label class="field">
                  <span>Name</span>
                  <input name="name" type="text" placeholder="OpenAI" />
                </label>
                <label class="field">
                  <span>Industry</span>
                  <input name="industry" type="text" placeholder="AI" />
                </label>
                <label class="field">
                  <span>Location</span>
                  <input name="location" type="text" placeholder="San Francisco" />
                </label>
                <button class="btn" type="submit">Add (Admin/Management)</button>
              </form>
              <div id="companiesTable" class="table"></div>
            </div>
          </section>

          <section id="view-categories" class="view" style="display: none">
            <div class="row">
              <h2>Categories</h2>
              <div class="row-actions">
                <button id="refreshCategoriesBtn" class="btn">Refresh</button>
              </div>
            </div>
            <div class="panel">
              <form id="categoryForm" class="form inline">
                <label class="field">
                  <span>Name</span>
                  <input name="name" type="text" placeholder="Software" />
                </label>
                <label class="field">
                  <span>Description</span>
                  <input name="description" type="text" placeholder="Software engineering roles" />
                </label>
                <label class="field">
                  <span>Manager ID</span>
                  <input name="managerID" type="number" placeholder="1" />
                </label>
                <button class="btn" type="submit">Add (Admin/Management)</button>
              </form>
              <div id="categoriesTable" class="table"></div>
            </div>
          </section>

          <section id="view-applications" class="view" style="display: none">
            <div class="row">
              <h2>Applications</h2>
              <div class="row-actions">
                <button id="refreshApplicationsBtn" class="btn">Refresh</button>
                <a class="btn ghost" id="exportCsvLink" href="/api/v1/applications/export.csv" target="_blank"
                  >CSV Export</a
                >
              </div>
            </div>
            <div class="panel">
              <form id="applicationForm" class="form">
                <div class="grid">
                  <label class="field">
                    <span>Company ID (optional)</span>
                    <input name="companyID" type="number" placeholder="2" />
                  </label>
                  <label class="field">
                    <span>Company (if no companyID)</span>
                    <input name="company" type="text" placeholder="Microsoft" />
                  </label>
                  <label class="field">
                    <span>Position</span>
                    <input name="position" type="text" placeholder="Backend Developer" required />
                  </label>
                  <label class="field">
                    <span>Status</span>
                    <select name="status">
                      <option>Applied</option>
                      <option>Interview</option>
                      <option>Offer</option>
                      <option>Accepted</option>
                      <option>Rejected</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Applied Date</span>
                    <input name="appliedDate" type="date" value="2025-01-20" required />
                  </label>
                  <label class="field">
                    <span>Priority</span>
                    <input name="priority" type="number" value="0" />
                  </label>
                  <label class="field">
                    <span>Deadline</span>
                    <input name="deadline" type="date" />
                  </label>
                  <label class="field">
                    <span>Category ID</span>
                    <input name="categoryID" type="number" placeholder="1" />
                  </label>
                </div>
                <label class="field">
                  <span>Notes</span>
                  <input name="notes" type="text" placeholder="Sent via LinkedIn" />
                </label>
                <button class="btn primary" type="submit">Create Application (JobSeeker)</button>
              </form>
            </div>
            <div class="panel">
              <div class="row small-gap">
                <label class="field">
                  <span>Filter: Status</span>
                  <select id="appStatusFilter">
                    <option value="">(all)</option>
                    <option>Applied</option>
                    <option>Interview</option>
                    <option>Offer</option>
                    <option>Accepted</option>
                    <option>Rejected</option>
                  </select>
                </label>
                <label class="field">
                  <span>Search</span>
                  <input id="appSearch" type="text" placeholder="company/position..." />
                </label>
                <button id="applyAppFiltersBtn" class="btn">Apply</button>
              </div>
              <div id="applicationsTable" class="table"></div>
            </div>
          </section>

          <section id="view-reminders" class="view" style="display: none">
            <div class="row">
              <h2>Reminders</h2>
              <div class="row-actions">
                <button id="refreshRemindersBtn" class="btn">Refresh</button>
              </div>
            </div>
            <div class="panel">
              <form id="reminderForm" class="form inline">
                <label class="field">
                  <span>App ID (optional)</span>
                  <input name="appID" type="number" placeholder="7" />
                </label>
                <label class="field">
                  <span>Date</span>
                  <input name="reminderDate" type="date" value="2025-01-25" required />
                </label>
                <label class="field">
                  <span>Message</span>
                  <input name="message" type="text" placeholder="Prepare for interview" required />
                </label>
                <button class="btn" type="submit">Add</button>
              </form>
              <div id="remindersTable" class="table"></div>
            </div>
          </section>
        </main>
      </div>
    </div>

    <script src="/app.js"></script>
  </body>
</html>

